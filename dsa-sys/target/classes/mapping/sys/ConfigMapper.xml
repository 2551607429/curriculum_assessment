<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.dsa.sys.dao.ConfigDao">
    <!-- 查询系统配置 -->
    <select id="findConfig" resultType="com.dsa.sys.dto.ConfigOutputDto">
        SELECT
            a.vc_Key vcKey,
            a.vc_Desc vcDesc,
            a.vc_Value vcValue,
            a.i_Type iType,
            a.i_IsEnable iIsEnable,
            a.i_Flag iFlag,
            vc_Memo vcMemo
        FROM
          sys_config a
        WHERE 1=1
        <if test="vcKey != null and vcKey != ''">
            AND a.vc_Key = #{vcKey}
        </if>
        <if test="vcDesc != null and vcDesc != ''">
            AND a.vc_Desc = #{vcDesc}
        </if>
        <if test="vcValue != null and vcValue != ''">
            AND a.vc_Value = #{vcValue}
        </if>
        <if test="iIsEnable != null and (iIsEnable==0 ? '0' : iIsEnable)">
            AND a.i_IsEnable = #{iIsEnable}
        </if>
        ORDER BY a.i_Sort
    </select>
    <!-- 修改系统配置 -->
    <update id="updateConfig">
        UPDATE sys_config
        SET
         <trim suffixOverrides=",">
             <if test="vcDesc != null and vcDesc != ''">
                 vc_Desc = #{vcDesc},
             </if>
             <if test="vcValue != null and vcValue != ''">
                 vc_Value = #{vcValue},
             </if>
             <if test="iType != null and iType != ''">
                 i_Type = #{iType},
             </if>
             <if test="iIsEnable != null and (iIsEnable==0 ? '0' : iIsEnable)">
                 i_IsEnable = #{iIsEnable},
             </if>
             <if test="iFlag != null and (iFlag==0 ? '0' : iFlag)">
                 i_Flag = #{iFlag},
             </if>
             <if test="vcMemo != null and vcMemo != ''">
                 vc_Memo = #{vcMemo},
             </if>
          </trim>
        WHERE
            vc_Key = #{vcKey}
    </update>
    <!-- 新增系统配置 -->
    <insert id="saveConfig">
        INSERT INTO sys_config ( vc_Key, vc_Desc, vc_Value, i_Type, i_IsEnable, i_Flag, i_Sort,vc_Memo)
        VALUES (#{vcKey},#{vcDesc},#{vcValue},#{iType},#{iIsEnable},#{iFlag},#{iSort},#{vcMemo})
    </insert>
    <!-- 删除系统配置 -->
    <delete id="delConfig">
        DELETE  FROM sys_config WHERE  vc_Key IN
     <foreach collection="configList" item="item" index="index" open="(" close=")" separator=",">
        #{item.vcKey}
    </foreach>
    </delete>
    <!-- 统计系统配置表 -->
    <select id="countConfig" resultType="java.lang.Integer">
        SELECT COUNT(1) FROM  sys_config WHERE 1=1
        <if test="vcKey != null and vcKey != ''">
        AND  vc_Key = #{vcKey}
        </if>
        <if test="vcValue != null and vcValue != ''">
            AND  vc_Value = #{vcValue}
        </if>
        <if test="vcDesc != null and vcDesc != ''">
            AND  vc_Desc = #{vcDesc}
        </if>
        <if test="iIsEnable != null and (iIsEnable==0 ? '0' : iIsEnable)">
            AND  i_IsEnable = #{iIsEnable}
        </if>
    </select>
</mapper>